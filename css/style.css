/* ============================================================
   PALETTE "SOMBRE / DARK OS"
   ============================================================ */
:root {
    --bg-desktop: #2a2a2a;      /* Fond gris foncé */
    --win-bg: #e0e0e0;          /* Gris clair pour le contenu */
    --win-header-start: #000000;/* Dégradé Noir */
    --win-header-end: #2e2e2e;  /* vers Gris */
    --win-border: #1a1a1a;      /* Bordure foncée */
    --taskbar-bg: #3f3f3f;      /* Barre sombre */
    --taskbar-btn: #525252;     /* Boutons gris */
    --text-primary: #1a1a1a;    /* Texte noir (dans les fenêtres) */
    --text-light: #ffffff;      /* Texte blanc (sur le bureau/headers) */
    --shadow-hard: 8px 8px 0px rgba(0, 0, 0, 0.4); /* Ombre marquée */
}

/* ============================================================
   CURSEURS
   ============================================================ */
html, body, * { 
    cursor: url('../assets/curseur copie.png'), auto !important; 
}
a, button, .desktop__shortcut, .file-grid__item, .window__close, .start-menu__item, .taskbar__start-btn, .clickable-image, .window__header, .control-btn, .cam-btn, .cam-close, .pong-btn, .pong-close {
    cursor: url('../assets/curseur copie.png'), pointer !important;
}
input, textarea, span, p, h1, h2, h3, h4, h5, h6 { 
    cursor: url('../assets/curseur copie.png'), text !important; 
}
*:active { 
    cursor: url('../assets/curseur point.png'), auto !important; 
}

/* ============================================================
   GLOBAL
   ============================================================ */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', Courier, monospace; }

body {
    overflow: hidden; height: 100vh; width: 100vw;
    background-color: var(--bg-desktop);
    color: var(--text-light);
}

/* ============================================================
   BUREAU
   ============================================================ */
.desktop {
    width: 100%; height: 100%; position: relative;
    background-image: url('../assets/fond.jpeg'); 
    background-size: cover; background-position: center; background-repeat: no-repeat;
}
.desktop.click-bg-active { background-image: url('../assets/fondbis.jpeg') !important; }

.desktop__layer { 
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; 
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 20%, rgba(0,0,0,0.8) 100%);
}
.deco-blob {
    bottom: 100px; right: 100px; width: 300px; height: 300px;
    background: linear-gradient(45deg, #ff0055, #ffcc00); border-radius: 50%;
    filter: blur(60px); opacity: 0.3; position: absolute;
}
body.easter-egg-active, body.easter-egg-active * { cursor: url('../assets/fuck.png'), auto !important; }

/* ============================================================
   WIDGET MUSIQUE
   ============================================================ */
.music-player {
    position: absolute; top: 20px; right: 20px; width: 250px;
    background-color: var(--win-bg); 
    border: 3px solid var(--win-border); 
    box-shadow: var(--shadow-hard);
    z-index: 50; display: none; flex-direction: column;
}

.music-player__header {
    background: linear-gradient(90deg, var(--win-header-start), var(--win-header-end));
    padding: 5px 10px; border-bottom: 3px solid var(--win-border);
    font-weight: bold; font-size: 12px; display: flex; justify-content: space-between;
    align-items: center; user-select: none; color: var(--text-light);
}

.music-player__body {
    padding: 15px; display: flex; flex-direction: column; align-items: center; text-align: center;
    background-color: #333;
    color: #fff;
}

.music-cover-container {
    width: 100px; height: 100px; border: 2px solid #000;
    margin-bottom: 10px; background-color: #000;
}
.music-cover { width: 100%; height: 100%; object-fit: cover; }

.music-info h4 {
    font-size: 14px; margin-bottom: 2px; white-space: nowrap; overflow: hidden;
    text-overflow: ellipsis; max-width: 200px;
}
.music-info p { font-size: 12px; opacity: 0.7; margin-bottom: 10px; }

.music-controls { display: flex; gap: 10px; }
.control-btn {
    width: 30px; height: 30px; border: 2px solid #000;
    background: #e0e0e0; display: flex; align-items: center; justify-content: center;
    font-size: 14px; box-shadow: 2px 2px 0px #000; color: #000;
}
.control-btn:active { background: #999; box-shadow: inset 1px 1px 0px #000; }

/* ============================================================
   ICÔNES
   ============================================================ */
.desktop__shortcut {
    position: absolute; z-index: 5; width: 100px;
    display: flex; flex-direction: column; align-items: center;
    text-align: center; padding: 10px; color: var(--text-light);
    text-shadow: 1px 1px 2px #000;
}
.desktop__shortcut:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px dashed rgba(255, 255, 255, 0.5); border-radius: 4px;
}
.desktop__icon { width: 64px; height: 64px; object-fit: contain; margin-bottom: 5px; pointer-events: none; }
.desktop__label { font-size: 14px; font-weight: bold; line-height: 1.2; }

/* ============================================================
   FENÊTRES
   ============================================================ */
.window {
    width: 500px; height: 400px; background-color: var(--win-bg);
    border: 3px solid var(--win-border); box-shadow: var(--shadow-hard);
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    display: none; flex-direction: column; z-index: 10;
}
.window.active { display: flex; }
.window__header {
    background: linear-gradient(90deg, var(--win-header-start), var(--win-header-end));
    padding: 8px 10px; display: flex; justify-content: space-between;
    align-items: center; color: var(--text-light); font-weight: bold;
    user-select: none; cursor: move; border-bottom: 3px solid var(--win-border);
}
.window__close {
    background: var(--win-bg); border: 2px solid var(--win-border);
    width: 24px; height: 24px; display: flex; align-items: center;
    justify-content: center; font-size: 14px; color: var(--text-primary);
}
.window__close:hover { background: #ff4d4d; color: white; }
.window__body { flex: 1; padding: 20px; overflow-y: auto; background-color: var(--win-bg); color: var(--text-primary); }
hr { border: 0; border-top: 2px solid var(--win-border); margin: 15px 0; }

/* ============================================================
   CONTENU (GRILLE)
   ============================================================ */
.file-grid { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px; }
.file-grid__item {
    width: 90px; display: flex; flex-direction: column; align-items: center;
    text-align: center; padding: 10px; color: var(--text-primary);
}
.file-grid__item:hover { background-color: rgba(0,0,0,0.1); border-radius: 4px; }
.file-grid__icon { width: 48px; height: 48px; object-fit: contain; margin-bottom: 5px; }
.file-grid__label { font-size: 12px; font-weight: bold; }

/* ============================================================
   VISIONNEUSE
   ============================================================ */
#win-preview { width: 800px; height: 600px; }
.preview-body { padding: 0; background-color: #222; display: flex; align-items: center; justify-content: center; overflow: hidden; height: 100%; }
#preview-img { max-width: 100%; max-height: 100%; object-fit: contain; }

/* ============================================================
   BARRE DES TÂCHES
   ============================================================ */
.taskbar {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 42px;
    background-color: var(--taskbar-bg); border-top: 3px solid var(--win-border);
    display: flex; align-items: center; padding: 4px; z-index: 99999;
}
.taskbar__start-btn {
    height: 100%; padding: 0 15px; font-weight: bold; font-size: 14px;
    display: flex; align-items: center; justify-content: center;
    background: var(--taskbar-btn); color: var(--text-light);
    border: 2px solid var(--win-border); margin-right: 10px;
}
.taskbar__start-btn:active, .taskbar__start-btn.active { background: var(--win-border); color: white; }
.taskbar__tray {
    margin-left: auto; background: var(--win-header-end); border: 2px solid var(--win-border); color: var(--text-light);
    padding: 0 15px; height: 100%; display: flex; align-items: center; justify-content: center; min-width: 70px;
}

/* ============================================================
   MENU DÉMARRER
   ============================================================ */
.start-menu {
    position: absolute; bottom: 42px; left: 0; width: 250px;
    background-color: var(--win-bg); border: 3px solid var(--win-border);
    box-shadow: var(--shadow-hard); z-index: 9999; display: none;
}
.start-menu.visible { display: flex; }
.start-menu__sidebar {
    width: 40px; background: var(--win-header-end); border-right: 3px solid var(--win-border);
    display: flex; align-items: flex-end; justify-content: center; padding-bottom: 10px;
}
.start-menu__name {
    writing-mode: vertical-rl; transform: rotate(180deg); color: var(--text-light);
    font-weight: bold; font-size: 16px; letter-spacing: 2px; margin: 20px 0;
}
.start-menu__content { flex: 1; padding: 5px; }
.start-menu__item { padding: 10px; color: var(--text-primary); font-weight: bold; }
.start-menu__item:hover { background-color: var(--win-header-start); color: white; }

/* ============================================================
   STYLE SPÉCIFIQUE : FENÊTRE À PROPOS
   ============================================================ */
.about-container { display: flex; gap: 20px; align-items: flex-start; }
.about-image-wrapper { flex-shrink: 0; }
.about-photo {
    width: 150px; height: 150px; object-fit: cover;
    border: 3px solid var(--text-primary); box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
}
.about-content { color: var(--text-primary); font-size: 14px; line-height: 1.5; }
.about-content h2 {
    font-size: 22px; margin-bottom: 5px; border-bottom: 2px solid var(--text-primary);
    padding-bottom: 5px; display: inline-block;
}

/* ============================================================
   STYLE SPÉCIFIQUE : FENÊTRE CONTACT
   ============================================================ */
.contact-body { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
.contact-grid { display: flex; gap: 20px; margin-top: 10px; }
.social-retro-btn {
    width: 90px; height: 90px; background-color: var(--win-bg);
    border: 3px solid var(--win-border); box-shadow: var(--shadow-hard);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    text-decoration: none; color: var(--text-primary); font-weight: bold; font-size: 14px;
    transition: transform 0.1s, box-shadow 0.1s;
}
.social-retro-btn i { font-size: 32px; margin-bottom: 10px; }
.social-retro-btn:hover {
    background-color: #fff; transform: translate(4px, 4px);
    box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.4);
}
.social-retro-btn:active { transform: translate(8px, 8px); box-shadow: none; }

/* ============================================================
   WIDGET CAMERA
   ============================================================ */
.camera-widget {
    position: absolute; top: 350px; left: 950px; width: 280px;
    background-color: var(--win-bg); border: 3px solid var(--win-border);
    box-shadow: var(--shadow-hard); z-index: 40; display: none; flex-direction: column;
}
.camera-widget__header {
    background: linear-gradient(90deg, #000, #333); padding: 8px 10px;
    border-bottom: 3px solid var(--win-border); font-weight: bold; font-size: 12px;
    display: flex; justify-content: space-between; align-items: center;
    color: #fff; cursor: grab; user-select: none;
}
.camera-controls { display: flex; align-items: center; }
.cam-btn { 
    background-color: #1a1a1a; border: 1px solid #ff0055; color: #ff0055;
    padding: 4px 12px; border-radius: 4px; font-size: 11px; font-weight: bold;
    letter-spacing: 1px; transition: all 0.2s ease; text-transform: uppercase;
}
.cam-btn:hover { background-color: #ff0055; color: #fff; box-shadow: 0 0 8px #ff0055; }
.cam-btn.active { border-color: #00ff00; color: #00ff00; }
.camera-widget__body { padding: 10px; background-color: #000; }
.video-container {
    position: relative; width: 100%; height: 180px; background: #111;
    overflow: hidden; border: 2px solid #333; display: flex; align-items: center; justify-content: center;
}
.video-container::after {
    content: "NO SIGNAL"; color: #333; font-family: monospace; font-size: 20px;
    position: absolute; z-index: 0;
}
#webcamVideo {
    width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1);
    opacity: 0.8; position: relative; z-index: 1;
}
.scanlines {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: repeating-linear-gradient(transparent 0px, transparent 2px, rgba(0, 0, 0, 0.3) 3px);
    pointer-events: none; z-index: 2;
}
.rec-indicator {
    position: absolute; top: 10px; right: 10px; color: #ff0000;
    font-weight: bold; font-family: monospace; font-size: 12px; z-index: 3;
    animation: blink 1s infinite; display: none; background: rgba(0,0,0,0.5);
    padding: 2px 5px; border-radius: 2px;
}
.rec-indicator.active { display: block; }
@keyframes blink { 50% { opacity: 0; } }

/* ============================================================
   WIDGET PONG
   ============================================================ */
.pong-widget {
    position: absolute; top: 100px; left: 400px; width: 290px;
    background-color: var(--win-bg); border: 3px solid var(--win-border); 
    box-shadow: var(--shadow-hard); z-index: 40; display: none; flex-direction: column;
}
.pong-widget__header {
    background: linear-gradient(90deg, #000, #333); padding: 5px 10px;
    border-bottom: 3px solid var(--win-border); font-weight: bold; font-size: 12px; 
    display: flex; justify-content: space-between; align-items: center; 
    color: #fff; cursor: grab; user-select: none;
}
.pong-controls { display: flex; gap: 10px; align-items: center; }

/* BOUTON CORRIGÉ ICI */
.pong-btn {
    background: none; 
    border: 1px solid #fff; 
    color: #fff; 
    cursor: pointer; 
    font-size: 12px;       /* Légèrement plus grand pour la flèche */
    width: 26px;           /* Agrandit la zone cliquable (avant: 20px) */
    height: 26px;          /* Hauteur égale pour un cercle parfait */
    display: flex; 
    align-items: center; 
    justify-content: center; 
    border-radius: 50%;
    padding: 0;            /* Supprime les décalages internes par défaut */
    line-height: 1;        /* Force l'alignement vertical */
    padding-left: 2px;     /* Petite astuce optique */
}

.pong-btn:hover { 
    background: #fff; 
    color: #000; 
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.5); /* Ajoute une lueur au survol pour bien voir la zone active */
}

.pong-close { background: none; border: none; color: white; cursor: pointer; font-weight: bold; }
.pong-close:hover { color: #ff4d4d; }
.pong-widget__body {
    padding: 10px; background-color: #222; display: flex; flex-direction: column; align-items: center;
}
/* CORRECTION: cursor: none important pour que le custom cursor n'écrase pas le jeu */
#pongCanvas { background-color: #000; border: 2px solid #555; cursor: none !important; }
#pongScore {
    margin-top: 5px; color: #fff; font-family: 'Courier New', monospace;
    font-weight: bold; font-size: 16px; letter-spacing: 2px;
}

/* RESPONSIVE */
@media screen and (max-width: 768px) {
    .camera-widget, .pong-widget, .taskbar, .start-menu, .music-player { display: none !important; }
}

/* ============================================================
   BARRE DES TÂCHES (MISE À JOUR)
   ============================================================ */
.taskbar {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 42px;
    background-color: var(--taskbar-bg); border-top: 3px solid var(--win-border);
    display: flex; align-items: center; padding: 4px; z-index: 99999;
}

.taskbar__start-btn {
    height: 100%; padding: 0 15px; font-weight: bold; font-size: 14px;
    display: flex; align-items: center; justify-content: center;
    background: var(--taskbar-btn); color: var(--text-light);
    border: 2px solid var(--win-border); margin-right: 10px;
}
.taskbar__start-btn:active, .taskbar__start-btn.active { 
    background: var(--win-border); color: white; box-shadow: inset 2px 2px 0px #000;
}

/* LE CONTENEUR DES BOUTONS */
.taskbar__items {
    flex: 1; /* Prend toute la place disponible */
    display: flex;
    gap: 5px; /* Espace entre les boutons */
    height: 100%;
}

/* STYLE DES BOUTONS WIDGETS */
.taskbar__item {
    height: 100%;
    width: 45px; /* Largeur fixe pour faire propre */
    background-color: var(--taskbar-btn);
    border: 2px solid var(--win-border);
    color: var(--text-light);
    font-size: 18px; /* Taille de l'icône */
    display: flex; align-items: center; justify-content: center;
    transition: all 0.1s;
}

.taskbar__item:hover {
    background-color: #666; /* Un peu plus clair au survol */
}

/* QUAND LE WIDGET EST OUVERT (bouton enfoncé) */
.taskbar__item.active {
    background-color: #2a2a2a; /* Plus sombre */
    box-shadow: inset 2px 2px 0px #000; /* Effet creusé */
    color: #ffffff; /* Petite touche de couleur néon (optionnel) */
    border-color: #555;
}

.taskbar__tray {
    margin-left: auto; background: var(--win-header-end); border: 2px solid var(--win-border); color: var(--text-light);
    padding: 0 15px; height: 100%; display: flex; align-items: center; justify-content: center; min-width: 70px;
}